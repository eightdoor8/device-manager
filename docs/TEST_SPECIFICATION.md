# Device Manager - QA テスト仕様書

**プロジェクト名**: Device Manager（モバイル端末管理アプリ）  
**バージョン**: 1.0.0  
**作成日**: 2025-12-20  
**対象プラットフォーム**: iOS / Android

---

## 目次

1. [テスト概要](#テスト概要)
2. [テスト環境](#テスト環境)
3. [テストケース](#テストケース)
4. [バグ報告フォーマット](#バグ報告フォーマット)

---

## テスト概要

### テスト目的

Device Manager アプリの主要機能（認証、端末登録、貸出・返却、検索）が正常に動作することを確認する。

### テスト範囲

- **認証機能**: ログイン・新規登録
- **端末登録機能**: 端末情報の自動取得と登録
- **端末管理機能**: 一覧表示、検索、フィルタ
- **貸出・返却機能**: ステータス管理、排他制御
- **ユーザー管理**: プロフィール表示、ログアウト

### テスト対象外

- Firebase バックエンド設定
- 本番環境デプロイメント
- パフォーマンステスト（別途実施）

---

## テスト環境

### 推奨テスト環境

| 項目 | 仕様 |
|------|------|
| **OS** | iOS 14.0 以上 / Android 8.0 以上 |
| **デバイス** | 実機（シミュレーター/エミュレーターは推奨外） |
| **ネットワーク** | Wi-Fi または 4G/5G（安定した通信環境） |
| **Firebase** | 本番環境プロジェクト（device-manager-c2454） |

### テスト実施前の準備

1. アプリをインストール
2. Firebase Firestore にテスト用ユーザーアカウントを作成
3. Firestore セキュリティルールが「開発用ルール」に設定されていることを確認
4. ネットワーク接続を確認

---

## テストケース

### 1. 認証機能

#### TC-001: 新規登録 - 正常系

**前提条件**: アプリがログイン画面を表示している

**テスト手順**:
1. 「新規登録」ボタンをタップ
2. メールアドレスを入力（例：`test001@example.com`）
3. パスワードを入力（例：`Password123!`）
4. パスワード確認を入力（同じパスワード）
5. 「登録」ボタンをタップ

**期待結果**:
- 登録が成功する
- ホーム画面（端末一覧）が表示される
- Firebase Console の Authentication に新しいユーザーが追加されている
- Firestore の `users` コレクションに新しいドキュメントが作成されている

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-002: 新規登録 - パスワード不一致

**前提条件**: アプリがログイン画面を表示している

**テスト手順**:
1. 「新規登録」ボタンをタップ
2. メールアドレスを入力
3. パスワードを入力（例：`Password123!`）
4. パスワード確認に異なるパスワードを入力（例：`Password456!`）
5. 「登録」ボタンをタップ

**期待結果**:
- エラーメッセージが表示される（「パスワードが一致しません」など）
- 登録が実行されない
- ログイン画面に留まる

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-003: ログイン - 正常系

**前提条件**: 
- アプリがログイン画面を表示している
- テスト用アカウント（`test001@example.com` / `Password123!`）が存在する

**テスト手順**:
1. メールアドレスを入力（`test001@example.com`）
2. パスワードを入力（`Password123!`）
3. 「ログイン」ボタンをタップ

**期待結果**:
- ログインが成功する
- ホーム画面（端末一覧）が表示される
- ユーザー情報がプロフィール画面に表示される

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-004: ログイン - 不正なパスワード

**前提条件**: 
- アプリがログイン画面を表示している
- テスト用アカウント（`test001@example.com`）が存在する

**テスト手順**:
1. メールアドレスを入力（`test001@example.com`）
2. パスワードを入力（間違ったパスワード）
3. 「ログイン」ボタンをタップ

**期待結果**:
- エラーメッセージが表示される（「ログインに失敗しました」など）
- ログイン画面に留まる

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

### 2. 端末登録機能

#### TC-005: 端末登録 - 正常系

**前提条件**:
- ユーザーがログインしている
- ホーム画面（端末一覧）が表示されている
- 実機でアプリを実行している

**テスト手順**:
1. ホーム画面の「＋追加」ボタンをタップ
2. 端末登録画面が表示されることを確認
3. 自動検出情報（OS名、OSバージョン、内部モデルID、メーカー、UUID）が表示されていることを確認
4. 「機種名」フィールドに機種名を入力（例：`iPhone 14 Pro Max`）
5. 「画面サイズ」フィールドに画面サイズを入力（例：`6.7インチ`）
6. 「メモ」フィールドにメモを入力（例：`テスト用端末`）
7. 「登録」ボタンをタップ

**期待結果**:
- 登録が成功する
- 成功メッセージが表示される
- ホーム画面に戻る
- 登録した端末がホーム画面の一覧に表示される
- Firebase Console の Firestore `devices` コレクションに新しいドキュメントが作成されている

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-006: 端末登録 - 必須項目未入力

**前提条件**:
- ユーザーがログインしている
- 端末登録画面が表示されている

**テスト手順**:
1. 「機種名」フィールドを空のままにする
2. 「登録」ボタンをタップ

**期待結果**:
- エラーメッセージが表示される（「必須項目を入力してください」など）
- 登録が実行されない
- 端末登録画面に留まる

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-007: 端末登録 - キャンセル

**前提条件**:
- ユーザーがログインしている
- 端末登録画面が表示されている

**テスト手順**:
1. 「キャンセル」ボタンをタップ

**期待結果**:
- ホーム画面に戻る
- 入力した情報は保存されない

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

### 3. 端末一覧・検索機能

#### TC-008: 端末一覧 - 表示確認

**前提条件**:
- ユーザーがログインしている
- 複数の端末が登録されている

**テスト手順**:
1. ホーム画面を表示
2. 端末一覧が表示されていることを確認
3. 各端末カードに以下の情報が表示されていることを確認：
   - 機種名
   - OSバージョン
   - 画面サイズ
   - ステータス（利用可 / 貸出中）
   - 利用者名（貸出中の場合）

**期待結果**:
- すべての登録済み端末が表示される
- 各端末の情報が正確に表示される
- ステータスが正確に表示される

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-009: 検索機能 - 機種名で検索

**前提条件**:
- ユーザーがログインしている
- 複数の端末が登録されている（例：iPhone、Android など）

**テスト手順**:
1. ホーム画面の検索フィールドをタップ
2. 検索キーワードを入力（例：`iPhone`）
3. 検索ボタンをタップ（または自動検索）

**期待結果**:
- 検索キーワードを含む端末のみが表示される
- 検索キーワードを含まない端末は表示されない

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-010: フィルタ機能 - OSバージョンでフィルタ

**前提条件**:
- ユーザーがログインしている
- 複数のOSバージョンの端末が登録されている

**テスト手順**:
1. ホーム画面のフィルタボタンをタップ
2. 「OSバージョン」フィルタを選択
3. 特定のOSバージョンを選択（例：`iOS 17`）
4. 「適用」ボタンをタップ

**期待結果**:
- 選択したOSバージョンの端末のみが表示される
- 他のOSバージョンの端末は表示されない

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

### 4. 貸出・返却機能

#### TC-011: 端末貸出 - 正常系

**前提条件**:
- ユーザーがログインしている
- 利用可能な端末が存在する

**テスト手順**:
1. ホーム画面から端末を選択
2. 端末詳細画面が表示されることを確認
3. 「借りる」ボタンをタップ

**期待結果**:
- 貸出が成功する
- 成功メッセージが表示される
- ステータスが「貸出中」に変更される
- 利用者名が現在のユーザー名に変更される
- ホーム画面に戻ると、該当端末のステータスが「貸出中」になっている

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-012: 端末貸出 - 排他制御

**前提条件**:
- ユーザーAが端末Xを借りている（ステータス：貸出中）
- ユーザーBでログインしている

**テスト手順**:
1. ホーム画面から端末Xを選択
2. 端末詳細画面が表示されることを確認
3. 「借りる」ボタンが無効化（グレーアウト）されていることを確認

**期待結果**:
- 「借りる」ボタンが無効化されている
- タップしても何も起こらない
- エラーメッセージが表示される場合がある

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-013: 端末返却 - 正常系

**前提条件**:
- ユーザーが端末を借りている（ステータス：貸出中）
- 端末詳細画面が表示されている

**テスト手順**:
1. 「返す」ボタンをタップ

**期待結果**:
- 返却が成功する
- 成功メッセージが表示される
- ステータスが「利用可」に変更される
- 利用者名がクリアされる
- ホーム画面に戻ると、該当端末のステータスが「利用可」になっている

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-014: 端末返却 - 他のユーザーが借りている場合

**前提条件**:
- ユーザーAが端末Xを借りている
- ユーザーBでログインしている

**テスト手順**:
1. ホーム画面から端末Xを選択
2. 端末詳細画面が表示されることを確認
3. 「返す」ボタンが無効化（グレーアウト）されていることを確認

**期待結果**:
- 「返す」ボタンが無効化されている
- タップしても何も起こらない

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

### 5. ユーザー管理機能

#### TC-015: プロフィール表示

**前提条件**:
- ユーザーがログインしている

**テスト手順**:
1. ホーム画面の「プロフィール」タブをタップ
2. プロフィール画面が表示されることを確認

**期待結果**:
- ユーザー情報が表示される（メールアドレス、ユーザー名など）
- 「ログアウト」ボタンが表示されている

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-016: ログアウト

**前提条件**:
- ユーザーがログインしている
- プロフィール画面が表示されている

**テスト手順**:
1. 「ログアウト」ボタンをタップ

**期待結果**:
- ログアウトが成功する
- ログイン画面が表示される
- ユーザー情報がクリアされる

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

### 6. エラーハンドリング

#### TC-017: ネットワークエラー時の表示

**前提条件**:
- ユーザーがログインしている
- ネットワーク接続を遮断できる環境

**テスト手順**:
1. Wi-Fi またはモバイルデータを OFF にする
2. ホーム画面の「＋追加」ボタンをタップ
3. 端末登録画面で「登録」ボタンをタップ

**期待結果**:
- エラーメッセージが表示される（「ネットワークエラー」など）
- アプリがクラッシュしない
- エラーメッセージを閉じるとホーム画面に戻る

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

#### TC-018: Firebase 接続エラー時の表示

**前提条件**:
- ユーザーがログインしている
- Firebase が一時的に利用できない状態

**テスト手順**:
1. ホーム画面の「＋追加」ボタンをタップ
2. 端末登録画面で「登録」ボタンをタップ

**期待結果**:
- エラーメッセージが表示される（「登録に失敗しました」など）
- アプリがクラッシュしない

**テスト実施者**: ___________  
**実施日**: ___________  
**結果**: ☐ 合格 ☐ 不合格  
**備考**: _____________________

---

## バグ報告フォーマット

バグを発見した場合は、以下のフォーマットで報告してください。

### バグ報告テンプレート

```
【バグタイトル】
[簡潔なバグの説明]

【重要度】
☐ 高（機能が使用できない）
☐ 中（機能に支障がある）
☐ 低（軽微な問題）

【テストケース】
TC-XXX: [テストケース名]

【再現手順】
1. ...
2. ...
3. ...

【期待結果】
[本来の動作]

【実際の結果】
[実際の動作]

【スクリーンショット】
[添付]

【環境】
- OS: iOS / Android
- OSバージョン: [バージョン]
- デバイス: [デバイス名]
- ネットワーク: Wi-Fi / モバイルデータ

【備考】
[その他の情報]
```

### バグ報告例

```
【バグタイトル】
端末登録時に「登録」ボタンをタップしても反応がない

【重要度】
☐ 高（機能が使用できない）
☐ 中（機能に支障がある）
☐ 低（軽微な問題）

【テストケース】
TC-005: 端末登録 - 正常系

【再現手順】
1. ホーム画面の「＋追加」ボタンをタップ
2. 端末登録画面で機種名を入力
3. 「登録」ボタンをタップ

【期待結果】
登録が成功し、成功メッセージが表示される

【実際の結果】
「登録」ボタンをタップしても何も起こらない

【スクリーンショット】
[添付]

【環境】
- OS: Android
- OSバージョン: 15
- デバイス: Pixel 8
- ネットワーク: Wi-Fi

【備考】
3回試しても同じ結果
```

---

## テスト実施記録

| テストケース | 実施者 | 実施日 | 結果 | 備考 |
|-----------|--------|--------|------|------|
| TC-001 | | | ☐ 合格 ☐ 不合格 | |
| TC-002 | | | ☐ 合格 ☐ 不合格 | |
| TC-003 | | | ☐ 合格 ☐ 不合格 | |
| TC-004 | | | ☐ 合格 ☐ 不合格 | |
| TC-005 | | | ☐ 合格 ☐ 不合格 | |
| TC-006 | | | ☐ 合格 ☐ 不合格 | |
| TC-007 | | | ☐ 合格 ☐ 不合格 | |
| TC-008 | | | ☐ 合格 ☐ 不合格 | |
| TC-009 | | | ☐ 合格 ☐ 不合格 | |
| TC-010 | | | ☐ 合格 ☐ 不合格 | |
| TC-011 | | | ☐ 合格 ☐ 不合格 | |
| TC-012 | | | ☐ 合格 ☐ 不合格 | |
| TC-013 | | | ☐ 合格 ☐ 不合格 | |
| TC-014 | | | ☐ 合格 ☐ 不合格 | |
| TC-015 | | | ☐ 合格 ☐ 不合格 | |
| TC-016 | | | ☐ 合格 ☐ 不合格 | |
| TC-017 | | | ☐ 合格 ☐ 不合格 | |
| TC-018 | | | ☐ 合格 ☐ 不合格 | |

---

## 付録

### A. テスト用アカウント

| メールアドレス | パスワード | 用途 |
|--------------|-----------|------|
| test001@example.com | Password123! | 基本テスト |
| test002@example.com | Password456! | 複数ユーザーテスト |
| admin@example.com | AdminPass123! | 管理者権限テスト |

### B. よくある問題と対処法

**問題**: 登録ボタンを押しても反応がない  
**対処法**: 
- ネットワーク接続を確認
- Firebase Console で Firestore が有効になっているか確認
- アプリを再起動

**問題**: 「認証に失敗しました」というエラーが表示される  
**対処法**:
- Firebase Console でセキュリティルールが「開発用ルール」に設定されているか確認
- ネットワーク接続を確認
- Firebase の設定情報が正しいか確認

**問題**: 端末情報が自動検出されない  
**対処法**:
- 実機で実行しているか確認（シミュレーター/エミュレーターでは自動検出されません）
- アプリの権限設定を確認

---

**テスト仕様書作成日**: 2025-12-20  
**最終更新日**: 2025-12-20  
**バージョン**: 1.0.0
